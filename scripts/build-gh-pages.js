// Generated by Copilot
// This script sets the base href for GitHub Pages deployment and builds the Angular app.
const { execSync } = require('child_process');
const fs = require('fs');

const repoName = require('../package.json').name;
const angularJsonPath = './angular.json';

// Read angular.json
const angularConfig = JSON.parse(fs.readFileSync(angularJsonPath, 'utf8'));
const project = angularConfig.projects[repoName];

// Set baseHref for production build
const baseHref = `/${repoName}/`;

console.log(`Building with base-href: ${baseHref}`);
execSync(`npx ng build --base-href ${baseHref} --configuration production`, { stdio: 'inherit' });

console.log('Build complete. You can now deploy with: npx ngh --dir=dist/' + repoName);
